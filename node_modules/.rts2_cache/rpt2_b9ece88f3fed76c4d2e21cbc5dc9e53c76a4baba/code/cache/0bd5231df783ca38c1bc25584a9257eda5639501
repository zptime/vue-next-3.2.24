{"code":"import { isArray, remove } from '@vue/shared';\r\nimport { warnDeprecation } from './compatConfig';\r\nexport function convertLegacyRefInFor(vnode) {\r\n    // refInFor\r\n    if (vnode.props && vnode.props.refInFor) {\r\n        delete vnode.props.refInFor;\r\n        if (vnode.ref) {\r\n            if (isArray(vnode.ref)) {\r\n                vnode.ref.forEach(r => (r.f = true));\r\n            }\r\n            else {\r\n                vnode.ref.f = true;\r\n            }\r\n        }\r\n    }\r\n}\r\nexport function registerLegacyRef(refs, key, value, owner, isInFor, isUnmount) {\r\n    const existing = refs[key];\r\n    if (isUnmount) {\r\n        if (isArray(existing)) {\r\n            remove(existing, value);\r\n        }\r\n        else {\r\n            refs[key] = null;\r\n        }\r\n    }\r\n    else if (isInFor) {\r\n        __DEV__ && warnDeprecation(\"V_FOR_REF\" /* V_FOR_REF */, owner);\r\n        if (!isArray(existing)) {\r\n            refs[key] = [value];\r\n        }\r\n        else if (!existing.includes(value)) {\r\n            existing.push(value);\r\n        }\r\n    }\r\n    else {\r\n        refs[key] = value;\r\n    }\r\n}\r\n//# sourceMappingURL=ref.js.map","references":["/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/shared/src/index.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/component.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/vnode.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/compat/compatConfig.ts"],"map":"{\"version\":3,\"file\":\"ref.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../packages/runtime-core/src/compat/ref.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,aAAa,CAAA;AAG7C,OAAO,EAAoB,eAAe,EAAE,MAAM,gBAAgB,CAAA;AAElE,MAAM,UAAU,qBAAqB,CAAC,KAAY;IAChD,WAAW;IACX,IAAI,KAAK,CAAC,KAAK,IAAI,KAAK,CAAC,KAAK,CAAC,QAAQ,EAAE;QACvC,OAAO,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAA;QAC3B,IAAI,KAAK,CAAC,GAAG,EAAE;YACb,IAAI,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;gBACtB,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAA;aACrC;iBAAM;gBACL,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAA;aACnB;SACF;KACF;AACH,CAAC;AAED,MAAM,UAAU,iBAAiB,CAC/B,IAAU,EACV,GAAW,EACX,KAAU,EACV,KAAgC,EAChC,OAA4B,EAC5B,SAAkB;IAElB,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAA;IAC1B,IAAI,SAAS,EAAE;QACb,IAAI,OAAO,CAAC,QAAQ,CAAC,EAAE;YACrB,MAAM,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAA;SACxB;aAAM;YACL,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAA;SACjB;KACF;SAAM,IAAI,OAAO,EAAE;QAClB,OAAO,IAAI,eAAe,8BAA6B,KAAK,CAAC,CAAA;QAC7D,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;YACtB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA;SACpB;aAAM,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE;YACpC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;SACrB;KACF;SAAM;QACL,IAAI,CAAC,GAAG,CAAC,GAAG,KAAK,CAAA;KAClB;AACH,CAAC\"}"}
