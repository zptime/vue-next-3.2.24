{"code":"import { currentInstance, isInSSRComponentSetup, setCurrentInstance, unsetCurrentInstance } from './component';\r\nimport { callWithAsyncErrorHandling, ErrorTypeStrings } from './errorHandling';\r\nimport { warn } from './warning';\r\nimport { toHandlerKey } from '@vue/shared';\r\nimport { pauseTracking, resetTracking } from '@vue/reactivity';\r\nexport { onActivated, onDeactivated } from './components/KeepAlive';\r\nexport function injectHook(type, hook, target = currentInstance, prepend = false) {\r\n    if (target) {\r\n        const hooks = target[type] || (target[type] = []);\r\n        // cache the error handling wrapper for injected hooks so the same hook\r\n        // can be properly deduped by the scheduler. \"__weh\" stands for \"with error\r\n        // handling\".\r\n        const wrappedHook = hook.__weh ||\r\n            (hook.__weh = (...args) => {\r\n                if (target.isUnmounted) {\r\n                    return;\r\n                }\r\n                // disable tracking inside all lifecycle hooks\r\n                // since they can potentially be called inside effects.\r\n                pauseTracking();\r\n                // Set currentInstance during hook invocation.\r\n                // This assumes the hook does not synchronously trigger other hooks, which\r\n                // can only be false when the user does something really funky.\r\n                setCurrentInstance(target);\r\n                const res = callWithAsyncErrorHandling(hook, target, type, args);\r\n                unsetCurrentInstance();\r\n                resetTracking();\r\n                return res;\r\n            });\r\n        if (prepend) {\r\n            hooks.unshift(wrappedHook);\r\n        }\r\n        else {\r\n            hooks.push(wrappedHook);\r\n        }\r\n        return wrappedHook;\r\n    }\r\n    else if (__DEV__) {\r\n        const apiName = toHandlerKey(ErrorTypeStrings[type].replace(/ hook$/, ''));\r\n        warn(`${apiName} is called when there is no active component instance to be ` +\r\n            `associated with. ` +\r\n            `Lifecycle injection APIs can only be used during execution of setup().` +\r\n            (__FEATURE_SUSPENSE__\r\n                ? ` If you are using async setup(), make sure to register lifecycle ` +\r\n                    `hooks before the first await statement.`\r\n                : ``));\r\n    }\r\n}\r\nexport const createHook = (lifecycle) => (hook, target = currentInstance) => \r\n// post-create lifecycle registrations are noops during SSR (except for serverPrefetch)\r\n(!isInSSRComponentSetup || lifecycle === \"sp\" /* SERVER_PREFETCH */) &&\r\n    injectHook(lifecycle, hook, target);\r\nexport const onBeforeMount = createHook(\"bm\" /* BEFORE_MOUNT */);\r\nexport const onMounted = createHook(\"m\" /* MOUNTED */);\r\nexport const onBeforeUpdate = createHook(\"bu\" /* BEFORE_UPDATE */);\r\nexport const onUpdated = createHook(\"u\" /* UPDATED */);\r\nexport const onBeforeUnmount = createHook(\"bum\" /* BEFORE_UNMOUNT */);\r\nexport const onUnmounted = createHook(\"um\" /* UNMOUNTED */);\r\nexport const onServerPrefetch = createHook(\"sp\" /* SERVER_PREFETCH */);\r\nexport const onRenderTriggered = createHook(\"rtg\" /* RENDER_TRIGGERED */);\r\nexport const onRenderTracked = createHook(\"rtc\" /* RENDER_TRACKED */);\r\nexport function onErrorCaptured(hook, target = currentInstance) {\r\n    injectHook(\"ec\" /* ERROR_CAPTURED */, hook, target);\r\n}\r\n//# sourceMappingURL=apiLifecycle.js.map","references":["/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/component.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/componentPublicInstance.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/errorHandling.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/warning.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/shared/src/index.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/reactivity/src/index.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/components/KeepAlive.ts"],"map":"{\"version\":3,\"file\":\"apiLifecycle.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../packages/runtime-core/src/apiLifecycle.ts\"],\"names\":[],\"mappings\":\"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\"}"}
