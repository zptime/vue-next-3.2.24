{"code":"import { validateComponentName, getExposeProxy } from './component';\r\nimport { validateDirectiveName } from './directives';\r\nimport { warn } from './warning';\r\nimport { createVNode, cloneVNode } from './vnode';\r\nimport { devtoolsInitApp, devtoolsUnmountApp } from './devtools';\r\nimport { isFunction, NO, isObject } from '@vue/shared';\r\nimport { version } from '.';\r\nimport { installAppCompatProperties } from './compat/global';\r\nexport function createAppContext() {\r\n    return {\r\n        app: null,\r\n        config: {\r\n            isNativeTag: NO,\r\n            performance: false,\r\n            globalProperties: {},\r\n            optionMergeStrategies: {},\r\n            errorHandler: undefined,\r\n            warnHandler: undefined,\r\n            compilerOptions: {}\r\n        },\r\n        mixins: [],\r\n        components: {},\r\n        directives: {},\r\n        provides: Object.create(null),\r\n        optionsCache: new WeakMap(),\r\n        propsCache: new WeakMap(),\r\n        emitsCache: new WeakMap()\r\n    };\r\n}\r\nlet uid = 0;\r\nexport function createAppAPI(render, hydrate) {\r\n    return function createApp(rootComponent, rootProps = null) {\r\n        if (rootProps != null && !isObject(rootProps)) {\r\n            __DEV__ && warn(`root props passed to app.mount() must be an object.`);\r\n            rootProps = null;\r\n        }\r\n        const context = createAppContext();\r\n        const installedPlugins = new Set();\r\n        let isMounted = false;\r\n        const app = (context.app = {\r\n            _uid: uid++,\r\n            _component: rootComponent,\r\n            _props: rootProps,\r\n            _container: null,\r\n            _context: context,\r\n            _instance: null,\r\n            version,\r\n            get config() {\r\n                return context.config;\r\n            },\r\n            set config(v) {\r\n                if (__DEV__) {\r\n                    warn(`app.config cannot be replaced. Modify individual options instead.`);\r\n                }\r\n            },\r\n            use(plugin, ...options) {\r\n                if (installedPlugins.has(plugin)) {\r\n                    __DEV__ && warn(`Plugin has already been applied to target app.`);\r\n                }\r\n                else if (plugin && isFunction(plugin.install)) {\r\n                    installedPlugins.add(plugin);\r\n                    plugin.install(app, ...options);\r\n                }\r\n                else if (isFunction(plugin)) {\r\n                    installedPlugins.add(plugin);\r\n                    plugin(app, ...options);\r\n                }\r\n                else if (__DEV__) {\r\n                    warn(`A plugin must either be a function or an object with an \"install\" ` +\r\n                        `function.`);\r\n                }\r\n                return app;\r\n            },\r\n            mixin(mixin) {\r\n                if (__FEATURE_OPTIONS_API__) {\r\n                    if (!context.mixins.includes(mixin)) {\r\n                        context.mixins.push(mixin);\r\n                    }\r\n                    else if (__DEV__) {\r\n                        warn('Mixin has already been applied to target app' +\r\n                            (mixin.name ? `: ${mixin.name}` : ''));\r\n                    }\r\n                }\r\n                else if (__DEV__) {\r\n                    warn('Mixins are only available in builds supporting Options API');\r\n                }\r\n                return app;\r\n            },\r\n            component(name, component) {\r\n                if (__DEV__) {\r\n                    validateComponentName(name, context.config);\r\n                }\r\n                if (!component) {\r\n                    return context.components[name];\r\n                }\r\n                if (__DEV__ && context.components[name]) {\r\n                    warn(`Component \"${name}\" has already been registered in target app.`);\r\n                }\r\n                context.components[name] = component;\r\n                return app;\r\n            },\r\n            directive(name, directive) {\r\n                if (__DEV__) {\r\n                    validateDirectiveName(name);\r\n                }\r\n                if (!directive) {\r\n                    return context.directives[name];\r\n                }\r\n                if (__DEV__ && context.directives[name]) {\r\n                    warn(`Directive \"${name}\" has already been registered in target app.`);\r\n                }\r\n                context.directives[name] = directive;\r\n                return app;\r\n            },\r\n            mount(rootContainer, isHydrate, isSVG) {\r\n                if (!isMounted) {\r\n                    const vnode = createVNode(rootComponent, rootProps);\r\n                    // store app context on the root VNode.\r\n                    // this will be set on the root instance on initial mount.\r\n                    vnode.appContext = context;\r\n                    // HMR root reload\r\n                    if (__DEV__) {\r\n                        context.reload = () => {\r\n                            render(cloneVNode(vnode), rootContainer, isSVG);\r\n                        };\r\n                    }\r\n                    if (isHydrate && hydrate) {\r\n                        hydrate(vnode, rootContainer);\r\n                    }\r\n                    else {\r\n                        render(vnode, rootContainer, isSVG);\r\n                    }\r\n                    isMounted = true;\r\n                    app._container = rootContainer;\r\n                    rootContainer.__vue_app__ = app;\r\n                    if (__DEV__ || __FEATURE_PROD_DEVTOOLS__) {\r\n                        app._instance = vnode.component;\r\n                        devtoolsInitApp(app, version);\r\n                    }\r\n                    return getExposeProxy(vnode.component) || vnode.component.proxy;\r\n                }\r\n                else if (__DEV__) {\r\n                    warn(`App has already been mounted.\\n` +\r\n                        `If you want to remount the same app, move your app creation logic ` +\r\n                        `into a factory function and create fresh app instances for each ` +\r\n                        `mount - e.g. \\`const createMyApp = () => createApp(App)\\``);\r\n                }\r\n            },\r\n            unmount() {\r\n                if (isMounted) {\r\n                    render(null, app._container);\r\n                    if (__DEV__ || __FEATURE_PROD_DEVTOOLS__) {\r\n                        app._instance = null;\r\n                        devtoolsUnmountApp(app);\r\n                    }\r\n                    delete app._container.__vue_app__;\r\n                }\r\n                else if (__DEV__) {\r\n                    warn(`Cannot unmount an app that is not mounted.`);\r\n                }\r\n            },\r\n            provide(key, value) {\r\n                if (__DEV__ && key in context.provides) {\r\n                    warn(`App already provides property with key \"${String(key)}\". ` +\r\n                        `It will be overwritten with the new value.`);\r\n                }\r\n                // TypeScript doesn't allow symbols as index type\r\n                // https://github.com/Microsoft/TypeScript/issues/24587\r\n                context.provides[key] = value;\r\n                return app;\r\n            }\r\n        });\r\n        if (__COMPAT__) {\r\n            installAppCompatProperties(app, context, render);\r\n        }\r\n        return app;\r\n    };\r\n}\r\n//# sourceMappingURL=apiCreateApp.js.map","references":["/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/component.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/componentOptions.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/componentPublicInstance.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/directives.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/renderer.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/apiInject.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/warning.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/vnode.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/hydration.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/devtools.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/shared/src/index.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/index.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/compat/global.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/componentProps.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/componentEmits.ts"],"map":"{\"version\":3,\"file\":\"apiCreateApp.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../packages/runtime-core/src/apiCreateApp.ts\"],\"names\":[],\"mappings\":\"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\"}"}
