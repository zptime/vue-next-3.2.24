{"code":"import { extend, looseEqual, looseIndexOf, NOOP, toDisplayString, toNumber } from '@vue/shared';\r\nimport { getCompatChildren } from './instanceChildren';\r\nimport { assertCompatEnabled, isCompatEnabled } from './compatConfig';\r\nimport { off, on, once } from './instanceEventEmitter';\r\nimport { getCompatListeners } from './instanceListeners';\r\nimport { shallowReadonly } from '@vue/reactivity';\r\nimport { legacySlotProxyHandlers } from './componentFunctional';\r\nimport { compatH } from './renderFn';\r\nimport { createCommentVNode, createTextVNode } from '../vnode';\r\nimport { renderList } from '../helpers/renderList';\r\nimport { legacyBindDynamicKeys, legacyBindObjectListeners, legacyBindObjectProps, legacyCheckKeyCodes, legacyMarkOnce, legacyPrependModifier, legacyRenderSlot, legacyRenderStatic, legacyresolveScopedSlots } from './renderHelpers';\r\nimport { resolveFilter } from '../helpers/resolveAssets';\r\nimport { resolveMergedOptions } from '../componentOptions';\r\nexport function installCompatInstanceProperties(map) {\r\n    const set = (target, key, val) => {\r\n        target[key] = val;\r\n    };\r\n    const del = (target, key) => {\r\n        delete target[key];\r\n    };\r\n    extend(map, {\r\n        $set: i => {\r\n            assertCompatEnabled(\"INSTANCE_SET\" /* INSTANCE_SET */, i);\r\n            return set;\r\n        },\r\n        $delete: i => {\r\n            assertCompatEnabled(\"INSTANCE_DELETE\" /* INSTANCE_DELETE */, i);\r\n            return del;\r\n        },\r\n        $mount: i => {\r\n            assertCompatEnabled(\"GLOBAL_MOUNT\" /* GLOBAL_MOUNT */, null /* this warning is global */);\r\n            // root mount override from ./global.ts in installCompatMount\r\n            return i.ctx._compat_mount || NOOP;\r\n        },\r\n        $destroy: i => {\r\n            assertCompatEnabled(\"INSTANCE_DESTROY\" /* INSTANCE_DESTROY */, i);\r\n            // root destroy override from ./global.ts in installCompatMount\r\n            return i.ctx._compat_destroy || NOOP;\r\n        },\r\n        // overrides existing accessor\r\n        $slots: i => {\r\n            if (isCompatEnabled(\"RENDER_FUNCTION\" /* RENDER_FUNCTION */, i) &&\r\n                i.render &&\r\n                i.render._compatWrapped) {\r\n                return new Proxy(i.slots, legacySlotProxyHandlers);\r\n            }\r\n            return __DEV__ ? shallowReadonly(i.slots) : i.slots;\r\n        },\r\n        $scopedSlots: i => {\r\n            assertCompatEnabled(\"INSTANCE_SCOPED_SLOTS\" /* INSTANCE_SCOPED_SLOTS */, i);\r\n            const res = {};\r\n            for (const key in i.slots) {\r\n                const fn = i.slots[key];\r\n                if (!fn._ns /* non-scoped slot */) {\r\n                    res[key] = fn;\r\n                }\r\n            }\r\n            return res;\r\n        },\r\n        $on: i => on.bind(null, i),\r\n        $once: i => once.bind(null, i),\r\n        $off: i => off.bind(null, i),\r\n        $children: getCompatChildren,\r\n        $listeners: getCompatListeners\r\n    });\r\n    /* istanbul ignore if */\r\n    if (isCompatEnabled(\"PRIVATE_APIS\" /* PRIVATE_APIS */, null)) {\r\n        extend(map, {\r\n            // needed by many libs / render fns\r\n            $vnode: i => i.vnode,\r\n            // inject addtional properties into $options for compat\r\n            // e.g. vuex needs this.$options.parent\r\n            $options: i => {\r\n                const res = extend({}, resolveMergedOptions(i));\r\n                res.parent = i.proxy.$parent;\r\n                res.propsData = i.vnode.props;\r\n                return res;\r\n            },\r\n            // some private properties that are likely accessed...\r\n            _self: i => i.proxy,\r\n            _uid: i => i.uid,\r\n            _data: i => i.data,\r\n            _isMounted: i => i.isMounted,\r\n            _isDestroyed: i => i.isUnmounted,\r\n            // v2 render helpers\r\n            $createElement: () => compatH,\r\n            _c: () => compatH,\r\n            _o: () => legacyMarkOnce,\r\n            _n: () => toNumber,\r\n            _s: () => toDisplayString,\r\n            _l: () => renderList,\r\n            _t: i => legacyRenderSlot.bind(null, i),\r\n            _q: () => looseEqual,\r\n            _i: () => looseIndexOf,\r\n            _m: i => legacyRenderStatic.bind(null, i),\r\n            _f: () => resolveFilter,\r\n            _k: i => legacyCheckKeyCodes.bind(null, i),\r\n            _b: () => legacyBindObjectProps,\r\n            _v: () => createTextVNode,\r\n            _e: () => createCommentVNode,\r\n            _u: () => legacyresolveScopedSlots,\r\n            _g: () => legacyBindObjectListeners,\r\n            _d: () => legacyBindDynamicKeys,\r\n            _p: () => legacyPrependModifier\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=instance.js.map","references":["/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/shared/src/index.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/componentPublicInstance.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/compat/instanceChildren.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/compat/compatConfig.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/compat/instanceEventEmitter.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/compat/instanceListeners.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/reactivity/src/index.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/compat/componentFunctional.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/compat/renderFn.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/vnode.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/helpers/renderList.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/compat/renderHelpers.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/helpers/resolveAssets.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/componentSlots.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/componentRenderContext.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/componentOptions.ts"],"map":"{\"version\":3,\"file\":\"instance.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../packages/runtime-core/src/compat/instance.ts\"],\"names\":[],\"mappings\":\"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\"}"}
