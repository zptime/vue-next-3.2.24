{"code":"import { formatComponentName } from './component';\r\nimport { isString, isFunction } from '@vue/shared';\r\nimport { toRaw, isRef, pauseTracking, resetTracking } from '@vue/reactivity';\r\nimport { callWithErrorHandling } from './errorHandling';\r\nconst stack = [];\r\nexport function pushWarningContext(vnode) {\r\n    stack.push(vnode);\r\n}\r\nexport function popWarningContext() {\r\n    stack.pop();\r\n}\r\nexport function warn(msg, ...args) {\r\n    // avoid props formatting or warn handler tracking deps that might be mutated\r\n    // during patch, leading to infinite recursion.\r\n    pauseTracking();\r\n    const instance = stack.length ? stack[stack.length - 1].component : null;\r\n    const appWarnHandler = instance && instance.appContext.config.warnHandler;\r\n    const trace = getComponentTrace();\r\n    if (appWarnHandler) {\r\n        callWithErrorHandling(appWarnHandler, instance, 11 /* APP_WARN_HANDLER */, [\r\n            msg + args.join(''),\r\n            instance && instance.proxy,\r\n            trace\r\n                .map(({ vnode }) => `at <${formatComponentName(instance, vnode.type)}>`)\r\n                .join('\\n'),\r\n            trace\r\n        ]);\r\n    }\r\n    else {\r\n        const warnArgs = [`[Vue warn]: ${msg}`, ...args];\r\n        /* istanbul ignore if */\r\n        if (trace.length &&\r\n            // avoid spamming console during tests\r\n            !__TEST__) {\r\n            warnArgs.push(`\\n`, ...formatTrace(trace));\r\n        }\r\n        console.warn(...warnArgs);\r\n    }\r\n    resetTracking();\r\n}\r\nexport function getComponentTrace() {\r\n    let currentVNode = stack[stack.length - 1];\r\n    if (!currentVNode) {\r\n        return [];\r\n    }\r\n    // we can't just use the stack because it will be incomplete during updates\r\n    // that did not start from the root. Re-construct the parent chain using\r\n    // instance parent pointers.\r\n    const normalizedStack = [];\r\n    while (currentVNode) {\r\n        const last = normalizedStack[0];\r\n        if (last && last.vnode === currentVNode) {\r\n            last.recurseCount++;\r\n        }\r\n        else {\r\n            normalizedStack.push({\r\n                vnode: currentVNode,\r\n                recurseCount: 0\r\n            });\r\n        }\r\n        const parentInstance = currentVNode.component && currentVNode.component.parent;\r\n        currentVNode = parentInstance && parentInstance.vnode;\r\n    }\r\n    return normalizedStack;\r\n}\r\n/* istanbul ignore next */\r\nfunction formatTrace(trace) {\r\n    const logs = [];\r\n    trace.forEach((entry, i) => {\r\n        logs.push(...(i === 0 ? [] : [`\\n`]), ...formatTraceEntry(entry));\r\n    });\r\n    return logs;\r\n}\r\nfunction formatTraceEntry({ vnode, recurseCount }) {\r\n    const postfix = recurseCount > 0 ? `... (${recurseCount} recursive calls)` : ``;\r\n    const isRoot = vnode.component ? vnode.component.parent == null : false;\r\n    const open = ` at <${formatComponentName(vnode.component, vnode.type, isRoot)}`;\r\n    const close = `>` + postfix;\r\n    return vnode.props\r\n        ? [open, ...formatProps(vnode.props), close]\r\n        : [open + close];\r\n}\r\n/* istanbul ignore next */\r\nfunction formatProps(props) {\r\n    const res = [];\r\n    const keys = Object.keys(props);\r\n    keys.slice(0, 3).forEach(key => {\r\n        res.push(...formatProp(key, props[key]));\r\n    });\r\n    if (keys.length > 3) {\r\n        res.push(` ...`);\r\n    }\r\n    return res;\r\n}\r\n/* istanbul ignore next */\r\nfunction formatProp(key, value, raw) {\r\n    if (isString(value)) {\r\n        value = JSON.stringify(value);\r\n        return raw ? value : [`${key}=${value}`];\r\n    }\r\n    else if (typeof value === 'number' ||\r\n        typeof value === 'boolean' ||\r\n        value == null) {\r\n        return raw ? value : [`${key}=${value}`];\r\n    }\r\n    else if (isRef(value)) {\r\n        value = formatProp(key, toRaw(value.value), true);\r\n        return raw ? value : [`${key}=Ref<`, value, `>`];\r\n    }\r\n    else if (isFunction(value)) {\r\n        return [`${key}=fn${value.name ? `<${value.name}>` : ``}`];\r\n    }\r\n    else {\r\n        value = toRaw(value);\r\n        return raw ? value : [`${key}=`, value];\r\n    }\r\n}\r\n//# sourceMappingURL=warning.js.map","references":["/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/vnode.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/component.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/shared/src/index.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/reactivity/src/index.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/errorHandling.ts"],"map":"{\"version\":3,\"file\":\"warning.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../packages/runtime-core/src/warning.ts\"],\"names\":[],\"mappings\":\"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\"}"}
