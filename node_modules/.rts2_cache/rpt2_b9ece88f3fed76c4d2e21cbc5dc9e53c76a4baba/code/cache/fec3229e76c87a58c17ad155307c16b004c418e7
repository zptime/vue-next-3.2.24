{"code":"import { isArray, isObject, isPromise } from '@vue/shared';\r\nimport { defineAsyncComponent } from '../apiAsyncComponent';\r\nimport { isVNode } from '../vnode';\r\nconst normalizedAsyncComponentMap = new Map();\r\nexport function convertLegacyAsyncComponent(comp) {\r\n    if (normalizedAsyncComponentMap.has(comp)) {\r\n        return normalizedAsyncComponentMap.get(comp);\r\n    }\r\n    // we have to call the function here due to how v2's API won't expose the\r\n    // options until we call it\r\n    let resolve;\r\n    let reject;\r\n    const fallbackPromise = new Promise((r, rj) => {\r\n        ;\r\n        (resolve = r), (reject = rj);\r\n    });\r\n    const res = comp(resolve, reject);\r\n    let converted;\r\n    if (isPromise(res)) {\r\n        converted = defineAsyncComponent(() => res);\r\n    }\r\n    else if (isObject(res) && !isVNode(res) && !isArray(res)) {\r\n        converted = defineAsyncComponent({\r\n            loader: () => res.component,\r\n            loadingComponent: res.loading,\r\n            errorComponent: res.error,\r\n            delay: res.delay,\r\n            timeout: res.timeout\r\n        });\r\n    }\r\n    else if (res == null) {\r\n        converted = defineAsyncComponent(() => fallbackPromise);\r\n    }\r\n    else {\r\n        converted = comp; // probably a v3 functional comp\r\n    }\r\n    normalizedAsyncComponentMap.set(comp, converted);\r\n    return converted;\r\n}\r\n//# sourceMappingURL=componentAsync.js.map","references":["/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/shared/src/index.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/apiAsyncComponent.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/component.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/vnode.ts"],"map":"{\"version\":3,\"file\":\"componentAsync.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../packages/runtime-core/src/compat/componentAsync.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,MAAM,aAAa,CAAA;AAC1D,OAAO,EAAE,oBAAoB,EAAE,MAAM,sBAAsB,CAAA;AAE3D,OAAO,EAAE,OAAO,EAAE,MAAM,UAAU,CAAA;AAiBlC,MAAM,2BAA2B,GAAG,IAAI,GAAG,EAAmC,CAAA;AAE9E,MAAM,UAAU,2BAA2B,CAAC,IAA0B;IACpE,IAAI,2BAA2B,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;QACzC,OAAO,2BAA2B,CAAC,GAAG,CAAC,IAAI,CAAE,CAAA;KAC9C;IAED,yEAAyE;IACzE,2BAA2B;IAC3B,IAAI,OAA8C,CAAA;IAClD,IAAI,MAA8B,CAAA;IAClC,MAAM,eAAe,GAAG,IAAI,OAAO,CAAY,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE;QACvD,CAAC;QAAA,CAAC,OAAO,GAAG,CAAC,CAAC,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,CAAA;IAC/B,CAAC,CAAC,CAAA;IAEF,MAAM,GAAG,GAAG,IAAI,CAAC,OAAQ,EAAE,MAAO,CAAC,CAAA;IAEnC,IAAI,SAAoB,CAAA;IACxB,IAAI,SAAS,CAAC,GAAG,CAAC,EAAE;QAClB,SAAS,GAAG,oBAAoB,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAA;KAC5C;SAAM,IAAI,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;QAC1D,SAAS,GAAG,oBAAoB,CAAC;YAC/B,MAAM,EAAE,GAAG,EAAE,CAAC,GAAG,CAAC,SAAS;YAC3B,gBAAgB,EAAE,GAAG,CAAC,OAAO;YAC7B,cAAc,EAAE,GAAG,CAAC,KAAK;YACzB,KAAK,EAAE,GAAG,CAAC,KAAK;YAChB,OAAO,EAAE,GAAG,CAAC,OAAO;SACrB,CAAC,CAAA;KACH;SAAM,IAAI,GAAG,IAAI,IAAI,EAAE;QACtB,SAAS,GAAG,oBAAoB,CAAC,GAAG,EAAE,CAAC,eAAe,CAAC,CAAA;KACxD;SAAM;QACL,SAAS,GAAG,IAAW,CAAA,CAAC,gCAAgC;KACzD;IACD,2BAA2B,CAAC,GAAG,CAAC,IAAI,EAAE,SAAS,CAAC,CAAA;IAChD,OAAO,SAAS,CAAA;AAClB,CAAC\"}"}
