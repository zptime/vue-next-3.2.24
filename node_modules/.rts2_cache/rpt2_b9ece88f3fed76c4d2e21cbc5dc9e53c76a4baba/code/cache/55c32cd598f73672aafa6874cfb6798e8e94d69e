{"code":"import { baseParse } from './parse';\r\nimport { transform } from './transform';\r\nimport { generate } from './codegen';\r\nimport { isString, extend } from '@vue/shared';\r\nimport { transformIf } from './transforms/vIf';\r\nimport { transformFor } from './transforms/vFor';\r\nimport { transformExpression } from './transforms/transformExpression';\r\nimport { transformSlotOutlet } from './transforms/transformSlotOutlet';\r\nimport { transformElement } from './transforms/transformElement';\r\nimport { transformOn } from './transforms/vOn';\r\nimport { transformBind } from './transforms/vBind';\r\nimport { trackSlotScopes, trackVForSlotScopes } from './transforms/vSlot';\r\nimport { transformText } from './transforms/transformText';\r\nimport { transformOnce } from './transforms/vOnce';\r\nimport { transformModel } from './transforms/vModel';\r\nimport { transformFilter } from './compat/transformFilter';\r\nimport { defaultOnError, createCompilerError } from './errors';\r\nimport { transformMemo } from './transforms/vMemo';\r\nexport function getBaseTransformPreset(prefixIdentifiers) {\r\n    return [\r\n        [\r\n            transformOnce,\r\n            transformIf,\r\n            transformMemo,\r\n            transformFor,\r\n            ...(__COMPAT__ ? [transformFilter] : []),\r\n            ...(!__BROWSER__ && prefixIdentifiers\r\n                ? [\r\n                    // order is important\r\n                    trackVForSlotScopes,\r\n                    transformExpression\r\n                ]\r\n                : __BROWSER__ && __DEV__\r\n                    ? [transformExpression]\r\n                    : []),\r\n            transformSlotOutlet,\r\n            transformElement,\r\n            trackSlotScopes,\r\n            transformText\r\n        ],\r\n        {\r\n            on: transformOn,\r\n            bind: transformBind,\r\n            model: transformModel\r\n        }\r\n    ];\r\n}\r\n// we name it `baseCompile` so that higher order compilers like\r\n// @vue/compiler-dom can export `compile` while re-exporting everything else.\r\nexport function baseCompile(template, options = {}) {\r\n    const onError = options.onError || defaultOnError;\r\n    const isModuleMode = options.mode === 'module';\r\n    /* istanbul ignore if */\r\n    if (__BROWSER__) {\r\n        if (options.prefixIdentifiers === true) {\r\n            onError(createCompilerError(46 /* X_PREFIX_ID_NOT_SUPPORTED */));\r\n        }\r\n        else if (isModuleMode) {\r\n            onError(createCompilerError(47 /* X_MODULE_MODE_NOT_SUPPORTED */));\r\n        }\r\n    }\r\n    const prefixIdentifiers = !__BROWSER__ && (options.prefixIdentifiers === true || isModuleMode);\r\n    if (!prefixIdentifiers && options.cacheHandlers) {\r\n        onError(createCompilerError(48 /* X_CACHE_HANDLER_NOT_SUPPORTED */));\r\n    }\r\n    if (options.scopeId && !isModuleMode) {\r\n        onError(createCompilerError(49 /* X_SCOPE_ID_NOT_SUPPORTED */));\r\n    }\r\n    const ast = isString(template) ? baseParse(template, options) : template;\r\n    const [nodeTransforms, directiveTransforms] = getBaseTransformPreset(prefixIdentifiers);\r\n    if (!__BROWSER__ && options.isTS) {\r\n        const { expressionPlugins } = options;\r\n        if (!expressionPlugins || !expressionPlugins.includes('typescript')) {\r\n            options.expressionPlugins = [...(expressionPlugins || []), 'typescript'];\r\n        }\r\n    }\r\n    transform(ast, extend({}, options, {\r\n        prefixIdentifiers,\r\n        nodeTransforms: [\r\n            ...nodeTransforms,\r\n            ...(options.nodeTransforms || []) // user transforms\r\n        ],\r\n        directiveTransforms: extend({}, directiveTransforms, options.directiveTransforms || {} // user transforms\r\n        )\r\n    }));\r\n    return generate(ast, extend({}, options, {\r\n        prefixIdentifiers\r\n    }));\r\n}\r\n//# sourceMappingURL=compile.js.map","references":["/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/compiler-core/src/options.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/compiler-core/src/parse.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/compiler-core/src/transform.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/compiler-core/src/codegen.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/compiler-core/src/ast.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/shared/src/index.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/compiler-core/src/transforms/vIf.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/compiler-core/src/transforms/vFor.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/compiler-core/src/transforms/transformExpression.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/compiler-core/src/transforms/transformSlotOutlet.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/compiler-core/src/transforms/transformElement.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/compiler-core/src/transforms/vOn.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/compiler-core/src/transforms/vBind.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/compiler-core/src/transforms/vSlot.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/compiler-core/src/transforms/transformText.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/compiler-core/src/transforms/vOnce.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/compiler-core/src/transforms/vModel.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/compiler-core/src/compat/transformFilter.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/compiler-core/src/errors.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/compiler-core/src/transforms/vMemo.ts"],"map":"{\"version\":3,\"file\":\"compile.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../packages/compiler-core/src/compile.ts\"],\"names\":[],\"mappings\":\"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\"}"}
