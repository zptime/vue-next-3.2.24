{"code":"import { devtoolsComponentUpdated } from './devtools';\r\nimport { setBlockTracking } from './vnode';\r\n/**\r\n * mark the current rendering instance for asset resolution (e.g.\r\n * resolveComponent, resolveDirective) during render\r\n */\r\nexport let currentRenderingInstance = null;\r\nexport let currentScopeId = null;\r\n/**\r\n * Note: rendering calls maybe nested. The function returns the parent rendering\r\n * instance if present, which should be restored after the render is done:\r\n *\r\n * ```js\r\n * const prev = setCurrentRenderingInstance(i)\r\n * // ...render\r\n * setCurrentRenderingInstance(prev)\r\n * ```\r\n */\r\nexport function setCurrentRenderingInstance(instance) {\r\n    const prev = currentRenderingInstance;\r\n    currentRenderingInstance = instance;\r\n    currentScopeId = (instance && instance.type.__scopeId) || null;\r\n    // v2 pre-compiled components uses _scopeId instead of __scopeId\r\n    if (__COMPAT__ && !currentScopeId) {\r\n        currentScopeId = (instance && instance.type._scopeId) || null;\r\n    }\r\n    return prev;\r\n}\r\n/**\r\n * Set scope id when creating hoisted vnodes.\r\n * @private compiler helper\r\n */\r\nexport function pushScopeId(id) {\r\n    currentScopeId = id;\r\n}\r\n/**\r\n * Technically we no longer need this after 3.0.8 but we need to keep the same\r\n * API for backwards compat w/ code generated by compilers.\r\n * @private\r\n */\r\nexport function popScopeId() {\r\n    currentScopeId = null;\r\n}\r\n/**\r\n * Only for backwards compat\r\n * @private\r\n */\r\nexport const withScopeId = (_id) => withCtx;\r\n/**\r\n * Wrap a slot function to memoize current rendering instance\r\n * @private compiler helper\r\n */\r\nexport function withCtx(fn, ctx = currentRenderingInstance, isNonScopedSlot // __COMPAT__ only\r\n) {\r\n    if (!ctx)\r\n        return fn;\r\n    // already normalized\r\n    if (fn._n) {\r\n        return fn;\r\n    }\r\n    const renderFnWithContext = (...args) => {\r\n        // If a user calls a compiled slot inside a template expression (#1745), it\r\n        // can mess up block tracking, so by default we disable block tracking and\r\n        // force bail out when invoking a compiled slot (indicated by the ._d flag).\r\n        // This isn't necessary if rendering a compiled `<slot>`, so we flip the\r\n        // ._d flag off when invoking the wrapped fn inside `renderSlot`.\r\n        if (renderFnWithContext._d) {\r\n            setBlockTracking(-1);\r\n        }\r\n        const prevInstance = setCurrentRenderingInstance(ctx);\r\n        const res = fn(...args);\r\n        setCurrentRenderingInstance(prevInstance);\r\n        if (renderFnWithContext._d) {\r\n            setBlockTracking(1);\r\n        }\r\n        if (__DEV__ || __FEATURE_PROD_DEVTOOLS__) {\r\n            devtoolsComponentUpdated(ctx);\r\n        }\r\n        return res;\r\n    };\r\n    // mark normalized to avoid duplicated wrapping\r\n    renderFnWithContext._n = true;\r\n    // mark this as compiled by default\r\n    // this is used in vnode.ts -> normalizeChildren() to set the slot\r\n    // rendering flag.\r\n    renderFnWithContext._c = true;\r\n    // disable block tracking by default\r\n    renderFnWithContext._d = true;\r\n    // compat build only flag to distinguish scoped slots from non-scoped ones\r\n    if (__COMPAT__ && isNonScopedSlot) {\r\n        renderFnWithContext._ns = true;\r\n    }\r\n    return renderFnWithContext;\r\n}\r\n//# sourceMappingURL=componentRenderContext.js.map","references":["/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/component.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/devtools.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/vnode.ts"],"map":"{\"version\":3,\"file\":\"componentRenderContext.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../packages/runtime-core/src/componentRenderContext.ts\"],\"names\":[],\"mappings\":\"AACA,OAAO,EAAE,wBAAwB,EAAE,MAAM,YAAY,CAAA;AACrD,OAAO,EAAE,gBAAgB,EAAE,MAAM,SAAS,CAAA;AAE1C;;;GAGG;AACH,MAAM,CAAC,IAAI,wBAAwB,GAAqC,IAAI,CAAA;AAC5E,MAAM,CAAC,IAAI,cAAc,GAAkB,IAAI,CAAA;AAE/C;;;;;;;;;GASG;AACH,MAAM,UAAU,2BAA2B,CACzC,QAA0C;IAE1C,MAAM,IAAI,GAAG,wBAAwB,CAAA;IACrC,wBAAwB,GAAG,QAAQ,CAAA;IACnC,cAAc,GAAG,CAAC,QAAQ,IAAI,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,IAAI,CAAA;IAC9D,gEAAgE;IAChE,IAAI,UAAU,IAAI,CAAC,cAAc,EAAE;QACjC,cAAc,GAAG,CAAC,QAAQ,IAAK,QAAQ,CAAC,IAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAA;KACvE;IACD,OAAO,IAAI,CAAA;AACb,CAAC;AAED;;;GAGG;AACH,MAAM,UAAU,WAAW,CAAC,EAAiB;IAC3C,cAAc,GAAG,EAAE,CAAA;AACrB,CAAC;AAED;;;;GAIG;AACH,MAAM,UAAU,UAAU;IACxB,cAAc,GAAG,IAAI,CAAA;AACvB,CAAC;AAED;;;GAGG;AACH,MAAM,CAAC,MAAM,WAAW,GAAG,CAAC,GAAW,EAAE,EAAE,CAAC,OAAO,CAAA;AAUnD;;;GAGG;AACH,MAAM,UAAU,OAAO,CACrB,EAAY,EACZ,MAAwC,wBAAwB,EAChE,eAAyB,CAAC,kBAAkB;;IAE5C,IAAI,CAAC,GAAG;QAAE,OAAO,EAAE,CAAA;IAEnB,qBAAqB;IACrB,IAAK,EAAyB,CAAC,EAAE,EAAE;QACjC,OAAO,EAAE,CAAA;KACV;IAED,MAAM,mBAAmB,GAAuB,CAAC,GAAG,IAAW,EAAE,EAAE;QACjE,2EAA2E;QAC3E,0EAA0E;QAC1E,4EAA4E;QAC5E,wEAAwE;QACxE,iEAAiE;QACjE,IAAI,mBAAmB,CAAC,EAAE,EAAE;YAC1B,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAA;SACrB;QACD,MAAM,YAAY,GAAG,2BAA2B,CAAC,GAAG,CAAC,CAAA;QACrD,MAAM,GAAG,GAAG,EAAE,CAAC,GAAG,IAAI,CAAC,CAAA;QACvB,2BAA2B,CAAC,YAAY,CAAC,CAAA;QACzC,IAAI,mBAAmB,CAAC,EAAE,EAAE;YAC1B,gBAAgB,CAAC,CAAC,CAAC,CAAA;SACpB;QAED,IAAI,OAAO,IAAI,yBAAyB,EAAE;YACxC,wBAAwB,CAAC,GAAG,CAAC,CAAA;SAC9B;QAED,OAAO,GAAG,CAAA;IACZ,CAAC,CAAA;IAED,+CAA+C;IAC/C,mBAAmB,CAAC,EAAE,GAAG,IAAI,CAAA;IAC7B,mCAAmC;IACnC,kEAAkE;IAClE,kBAAkB;IAClB,mBAAmB,CAAC,EAAE,GAAG,IAAI,CAAA;IAC7B,oCAAoC;IACpC,mBAAmB,CAAC,EAAE,GAAG,IAAI,CAAA;IAC7B,0EAA0E;IAC1E,IAAI,UAAU,IAAI,eAAe,EAAE;QACjC,mBAAmB,CAAC,GAAG,GAAG,IAAI,CAAA;KAC/B;IACD,OAAO,mBAAmB,CAAA;AAC5B,CAAC\"}"}
