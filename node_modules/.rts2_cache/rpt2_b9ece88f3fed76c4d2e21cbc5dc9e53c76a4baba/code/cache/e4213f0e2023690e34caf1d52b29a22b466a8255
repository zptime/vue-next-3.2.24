{"code":"import { getCurrentInstance, warn, Fragment, Static, watchPostEffect, onMounted, onUnmounted } from '@vue/runtime-core';\r\n/**\r\n * Runtime helper for SFC's CSS variable injection feature.\r\n * @private\r\n */\r\nexport function useCssVars(getter) {\r\n    if (!__BROWSER__ && !__TEST__)\r\n        return;\r\n    const instance = getCurrentInstance();\r\n    /* istanbul ignore next */\r\n    if (!instance) {\r\n        __DEV__ &&\r\n            warn(`useCssVars is called without current active component instance.`);\r\n        return;\r\n    }\r\n    const setVars = () => setVarsOnVNode(instance.subTree, getter(instance.proxy));\r\n    watchPostEffect(setVars);\r\n    onMounted(() => {\r\n        const ob = new MutationObserver(setVars);\r\n        ob.observe(instance.subTree.el.parentNode, { childList: true });\r\n        onUnmounted(() => ob.disconnect());\r\n    });\r\n}\r\nfunction setVarsOnVNode(vnode, vars) {\r\n    if (__FEATURE_SUSPENSE__ && vnode.shapeFlag & 128 /* SUSPENSE */) {\r\n        const suspense = vnode.suspense;\r\n        vnode = suspense.activeBranch;\r\n        if (suspense.pendingBranch && !suspense.isHydrating) {\r\n            suspense.effects.push(() => {\r\n                setVarsOnVNode(suspense.activeBranch, vars);\r\n            });\r\n        }\r\n    }\r\n    // drill down HOCs until it's a non-component vnode\r\n    while (vnode.component) {\r\n        vnode = vnode.component.subTree;\r\n    }\r\n    if (vnode.shapeFlag & 1 /* ELEMENT */ && vnode.el) {\r\n        setVarsOnNode(vnode.el, vars);\r\n    }\r\n    else if (vnode.type === Fragment) {\r\n        ;\r\n        vnode.children.forEach(c => setVarsOnVNode(c, vars));\r\n    }\r\n    else if (vnode.type === Static) {\r\n        let { el, anchor } = vnode;\r\n        while (el) {\r\n            setVarsOnNode(el, vars);\r\n            if (el === anchor)\r\n                break;\r\n            el = el.nextSibling;\r\n        }\r\n    }\r\n}\r\nfunction setVarsOnNode(el, vars) {\r\n    if (el.nodeType === 1) {\r\n        const style = el.style;\r\n        for (const key in vars) {\r\n            style.setProperty(`--${key}`, vars[key]);\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=useCssVars.js.map","references":["/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/index.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/shared/src/index.ts"],"map":"{\"version\":3,\"file\":\"useCssVars.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../packages/runtime-dom/src/helpers/useCssVars.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EACL,kBAAkB,EAClB,IAAI,EAEJ,QAAQ,EACR,MAAM,EACN,eAAe,EACf,SAAS,EACT,WAAW,EACZ,MAAM,mBAAmB,CAAA;AAG1B;;;GAGG;AACH,MAAM,UAAU,UAAU,CAAC,MAA4C;IACrE,IAAI,CAAC,WAAW,IAAI,CAAC,QAAQ;QAAE,OAAM;IAErC,MAAM,QAAQ,GAAG,kBAAkB,EAAE,CAAA;IACrC,0BAA0B;IAC1B,IAAI,CAAC,QAAQ,EAAE;QACb,OAAO;YACL,IAAI,CAAC,iEAAiE,CAAC,CAAA;QACzE,OAAM;KACP;IAED,MAAM,OAAO,GAAG,GAAG,EAAE,CACnB,cAAc,CAAC,QAAQ,CAAC,OAAO,EAAE,MAAM,CAAC,QAAQ,CAAC,KAAM,CAAC,CAAC,CAAA;IAC3D,eAAe,CAAC,OAAO,CAAC,CAAA;IACxB,SAAS,CAAC,GAAG,EAAE;QACb,MAAM,EAAE,GAAG,IAAI,gBAAgB,CAAC,OAAO,CAAC,CAAA;QACxC,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAG,CAAC,UAAU,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAA;QAChE,WAAW,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,CAAA;IACpC,CAAC,CAAC,CAAA;AACJ,CAAC;AAED,SAAS,cAAc,CAAC,KAAY,EAAE,IAA4B;IAChE,IAAI,oBAAoB,IAAI,KAAK,CAAC,SAAS,qBAAsB,EAAE;QACjE,MAAM,QAAQ,GAAG,KAAK,CAAC,QAAS,CAAA;QAChC,KAAK,GAAG,QAAQ,CAAC,YAAa,CAAA;QAC9B,IAAI,QAAQ,CAAC,aAAa,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE;YACnD,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE;gBACzB,cAAc,CAAC,QAAQ,CAAC,YAAa,EAAE,IAAI,CAAC,CAAA;YAC9C,CAAC,CAAC,CAAA;SACH;KACF;IAED,mDAAmD;IACnD,OAAO,KAAK,CAAC,SAAS,EAAE;QACtB,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC,OAAO,CAAA;KAChC;IAED,IAAI,KAAK,CAAC,SAAS,kBAAqB,IAAI,KAAK,CAAC,EAAE,EAAE;QACpD,aAAa,CAAC,KAAK,CAAC,EAAU,EAAE,IAAI,CAAC,CAAA;KACtC;SAAM,IAAI,KAAK,CAAC,IAAI,KAAK,QAAQ,EAAE;QAClC,CAAC;QAAC,KAAK,CAAC,QAAoB,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAA;KACnE;SAAM,IAAI,KAAK,CAAC,IAAI,KAAK,MAAM,EAAE;QAChC,IAAI,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,KAAK,CAAA;QAC1B,OAAO,EAAE,EAAE;YACT,aAAa,CAAC,EAAU,EAAE,IAAI,CAAC,CAAA;YAC/B,IAAI,EAAE,KAAK,MAAM;gBAAE,MAAK;YACxB,EAAE,GAAG,EAAE,CAAC,WAAW,CAAA;SACpB;KACF;AACH,CAAC;AAED,SAAS,aAAa,CAAC,EAAQ,EAAE,IAA4B;IAC3D,IAAI,EAAE,CAAC,QAAQ,KAAK,CAAC,EAAE;QACrB,MAAM,KAAK,GAAI,EAAkB,CAAC,KAAK,CAAA;QACvC,KAAK,MAAM,GAAG,IAAI,IAAI,EAAE;YACtB,KAAK,CAAC,WAAW,CAAC,KAAK,GAAG,EAAE,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAA;SACzC;KACF;AACH,CAAC\"}"}
