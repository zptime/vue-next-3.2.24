{"code":"/**\r\nRuntime helper for applying directives to a vnode. Example usage:\r\n\nconst comp = resolveComponent('comp')\r\nconst foo = resolveDirective('foo')\r\nconst bar = resolveDirective('bar')\r\n\nreturn withDirectives(h(comp), [\r\n  [foo, this.x],\r\n  [bar, this.y]\r\n])\r\n*/\r\nimport { isFunction, EMPTY_OBJ, makeMap } from '@vue/shared';\r\nimport { warn } from './warning';\r\nimport { currentRenderingInstance } from './componentRenderContext';\r\nimport { callWithAsyncErrorHandling } from './errorHandling';\r\nimport { mapCompatDirectiveHook } from './compat/customDirective';\r\nimport { pauseTracking, resetTracking } from '@vue/reactivity';\r\nimport { traverse } from './apiWatch';\r\nconst isBuiltInDirective = /*#__PURE__*/ makeMap('bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo');\r\nexport function validateDirectiveName(name) {\r\n    if (isBuiltInDirective(name)) {\r\n        warn('Do not use built-in directive ids as custom directive id: ' + name);\r\n    }\r\n}\r\n/**\r\n * Adds directives to a VNode.\r\n */\r\nexport function withDirectives(vnode, directives) {\r\n    const internalInstance = currentRenderingInstance;\r\n    if (internalInstance === null) {\r\n        __DEV__ && warn(`withDirectives can only be used inside render functions.`);\r\n        return vnode;\r\n    }\r\n    const instance = internalInstance.proxy;\r\n    const bindings = vnode.dirs || (vnode.dirs = []);\r\n    for (let i = 0; i < directives.length; i++) {\r\n        let [dir, value, arg, modifiers = EMPTY_OBJ] = directives[i];\r\n        if (isFunction(dir)) {\r\n            dir = {\r\n                mounted: dir,\r\n                updated: dir\r\n            };\r\n        }\r\n        if (dir.deep) {\r\n            traverse(value);\r\n        }\r\n        bindings.push({\r\n            dir,\r\n            instance,\r\n            value,\r\n            oldValue: void 0,\r\n            arg,\r\n            modifiers\r\n        });\r\n    }\r\n    return vnode;\r\n}\r\nexport function invokeDirectiveHook(vnode, prevVNode, instance, name) {\r\n    const bindings = vnode.dirs;\r\n    const oldBindings = prevVNode && prevVNode.dirs;\r\n    for (let i = 0; i < bindings.length; i++) {\r\n        const binding = bindings[i];\r\n        if (oldBindings) {\r\n            binding.oldValue = oldBindings[i].value;\r\n        }\r\n        let hook = binding.dir[name];\r\n        if (__COMPAT__ && !hook) {\r\n            hook = mapCompatDirectiveHook(name, binding.dir, instance);\r\n        }\r\n        if (hook) {\r\n            // disable tracking inside all lifecycle hooks\r\n            // since they can potentially be called inside effects.\r\n            pauseTracking();\r\n            callWithAsyncErrorHandling(hook, instance, 8 /* DIRECTIVE_HOOK */, [\r\n                vnode.el,\r\n                binding,\r\n                vnode,\r\n                prevVNode\r\n            ]);\r\n            resetTracking();\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=directives.js.map","references":["/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/vnode.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/shared/src/index.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/warning.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/component.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/componentRenderContext.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/errorHandling.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/componentPublicInstance.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/compat/customDirective.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/reactivity/src/index.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/apiWatch.ts"],"map":"{\"version\":3,\"file\":\"directives.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../packages/runtime-core/src/directives.ts\"],\"names\":[],\"mappings\":\"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\"}"}
