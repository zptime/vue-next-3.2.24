{"code":"import { getCurrentInstance, compatUtils } from '@vue/runtime-core';\r\nimport { hyphenate, isArray } from '@vue/shared';\r\nconst systemModifiers = ['ctrl', 'shift', 'alt', 'meta'];\r\nconst modifierGuards = {\r\n    stop: e => e.stopPropagation(),\r\n    prevent: e => e.preventDefault(),\r\n    self: e => e.target !== e.currentTarget,\r\n    ctrl: e => !e.ctrlKey,\r\n    shift: e => !e.shiftKey,\r\n    alt: e => !e.altKey,\r\n    meta: e => !e.metaKey,\r\n    left: e => 'button' in e && e.button !== 0,\r\n    middle: e => 'button' in e && e.button !== 1,\r\n    right: e => 'button' in e && e.button !== 2,\r\n    exact: (e, modifiers) => systemModifiers.some(m => e[`${m}Key`] && !modifiers.includes(m))\r\n};\r\n/**\r\n * @private\r\n */\r\nexport const withModifiers = (fn, modifiers) => {\r\n    return (event, ...args) => {\r\n        for (let i = 0; i < modifiers.length; i++) {\r\n            const guard = modifierGuards[modifiers[i]];\r\n            if (guard && guard(event, modifiers))\r\n                return;\r\n        }\r\n        return fn(event, ...args);\r\n    };\r\n};\r\n// Kept for 2.x compat.\r\n// Note: IE11 compat for `spacebar` and `del` is removed for now.\r\nconst keyNames = {\r\n    esc: 'escape',\r\n    space: ' ',\r\n    up: 'arrow-up',\r\n    left: 'arrow-left',\r\n    right: 'arrow-right',\r\n    down: 'arrow-down',\r\n    delete: 'backspace'\r\n};\r\n/**\r\n * @private\r\n */\r\nexport const withKeys = (fn, modifiers) => {\r\n    let globalKeyCodes;\r\n    let instance = null;\r\n    if (__COMPAT__) {\r\n        instance = getCurrentInstance();\r\n        if (compatUtils.isCompatEnabled(\"CONFIG_KEY_CODES\" /* CONFIG_KEY_CODES */, instance)) {\r\n            if (instance) {\r\n                globalKeyCodes = instance.appContext.config.keyCodes;\r\n            }\r\n        }\r\n        if (__DEV__ && modifiers.some(m => /^\\d+$/.test(m))) {\r\n            compatUtils.warnDeprecation(\"V_ON_KEYCODE_MODIFIER\" /* V_ON_KEYCODE_MODIFIER */, instance);\r\n        }\r\n    }\r\n    return (event) => {\r\n        if (!('key' in event)) {\r\n            return;\r\n        }\r\n        const eventKey = hyphenate(event.key);\r\n        if (modifiers.some(k => k === eventKey || keyNames[k] === eventKey)) {\r\n            return fn(event);\r\n        }\r\n        if (__COMPAT__) {\r\n            const keyCode = String(event.keyCode);\r\n            if (compatUtils.isCompatEnabled(\"V_ON_KEYCODE_MODIFIER\" /* V_ON_KEYCODE_MODIFIER */, instance) &&\r\n                modifiers.some(mod => mod == keyCode)) {\r\n                return fn(event);\r\n            }\r\n            if (globalKeyCodes) {\r\n                for (const mod of modifiers) {\r\n                    const codes = globalKeyCodes[mod];\r\n                    if (codes) {\r\n                        const matches = isArray(codes)\r\n                            ? codes.some(code => String(code) === keyCode)\r\n                            : String(codes) === keyCode;\r\n                        if (matches) {\r\n                            return fn(event);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n};\r\n//# sourceMappingURL=vOn.js.map","references":["/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/index.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/shared/src/index.ts"],"map":"{\"version\":3,\"file\":\"vOn.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../packages/runtime-dom/src/directives/vOn.ts\"],\"names\":[],\"mappings\":\"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\"}"}
