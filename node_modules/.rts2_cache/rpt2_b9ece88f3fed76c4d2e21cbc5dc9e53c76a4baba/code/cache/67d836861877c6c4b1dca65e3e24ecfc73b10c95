{"code":"import { getCurrentInstance, currentInstance, getComponentName } from '../component';\r\nimport { cloneVNode, isVNode } from '../vnode';\r\nimport { warn } from '../warning';\r\nimport { onBeforeUnmount, injectHook, onUnmounted, onMounted, onUpdated } from '../apiLifecycle';\r\nimport { isString, isArray, remove, invokeArrayFns } from '@vue/shared';\r\nimport { watch } from '../apiWatch';\r\nimport { queuePostRenderEffect, invokeVNodeHook } from '../renderer';\r\nimport { setTransitionHooks } from './BaseTransition';\r\nimport { devtoolsComponentAdded } from '../devtools';\r\nimport { isAsyncWrapper } from '../apiAsyncComponent';\r\nexport const isKeepAlive = (vnode) => vnode.type.__isKeepAlive;\r\nconst KeepAliveImpl = {\r\n    name: `KeepAlive`,\r\n    // Marker for special handling inside the renderer. We are not using a ===\r\n    // check directly on KeepAlive in the renderer, because importing it directly\r\n    // would prevent it from being tree-shaken.\r\n    __isKeepAlive: true,\r\n    props: {\r\n        include: [String, RegExp, Array],\r\n        exclude: [String, RegExp, Array],\r\n        max: [String, Number]\r\n    },\r\n    setup(props, { slots }) {\r\n        const instance = getCurrentInstance();\r\n        // KeepAlive communicates with the instantiated renderer via the\r\n        // ctx where the renderer passes in its internals,\r\n        // and the KeepAlive instance exposes activate/deactivate implementations.\r\n        // The whole point of this is to avoid importing KeepAlive directly in the\r\n        // renderer to facilitate tree-shaking.\r\n        const sharedContext = instance.ctx;\r\n        // if the internal renderer is not registered, it indicates that this is server-side rendering,\r\n        // for KeepAlive, we just need to render its children\r\n        if (!sharedContext.renderer) {\r\n            return slots.default;\r\n        }\r\n        const cache = new Map();\r\n        const keys = new Set();\r\n        let current = null;\r\n        if (__DEV__ || __FEATURE_PROD_DEVTOOLS__) {\r\n            ;\r\n            instance.__v_cache = cache;\r\n        }\r\n        const parentSuspense = instance.suspense;\r\n        const { renderer: { p: patch, m: move, um: _unmount, o: { createElement } } } = sharedContext;\r\n        const storageContainer = createElement('div');\r\n        sharedContext.activate = (vnode, container, anchor, isSVG, optimized) => {\r\n            const instance = vnode.component;\r\n            move(vnode, container, anchor, 0 /* ENTER */, parentSuspense);\r\n            // in case props have changed\r\n            patch(instance.vnode, vnode, container, anchor, instance, parentSuspense, isSVG, vnode.slotScopeIds, optimized);\r\n            queuePostRenderEffect(() => {\r\n                instance.isDeactivated = false;\r\n                if (instance.a) {\r\n                    invokeArrayFns(instance.a);\r\n                }\r\n                const vnodeHook = vnode.props && vnode.props.onVnodeMounted;\r\n                if (vnodeHook) {\r\n                    invokeVNodeHook(vnodeHook, instance.parent, vnode);\r\n                }\r\n            }, parentSuspense);\r\n            if (__DEV__ || __FEATURE_PROD_DEVTOOLS__) {\r\n                // Update components tree\r\n                devtoolsComponentAdded(instance);\r\n            }\r\n        };\r\n        sharedContext.deactivate = (vnode) => {\r\n            const instance = vnode.component;\r\n            move(vnode, storageContainer, null, 1 /* LEAVE */, parentSuspense);\r\n            queuePostRenderEffect(() => {\r\n                if (instance.da) {\r\n                    invokeArrayFns(instance.da);\r\n                }\r\n                const vnodeHook = vnode.props && vnode.props.onVnodeUnmounted;\r\n                if (vnodeHook) {\r\n                    invokeVNodeHook(vnodeHook, instance.parent, vnode);\r\n                }\r\n                instance.isDeactivated = true;\r\n            }, parentSuspense);\r\n            if (__DEV__ || __FEATURE_PROD_DEVTOOLS__) {\r\n                // Update components tree\r\n                devtoolsComponentAdded(instance);\r\n            }\r\n        };\r\n        function unmount(vnode) {\r\n            // reset the shapeFlag so it can be properly unmounted\r\n            resetShapeFlag(vnode);\r\n            _unmount(vnode, instance, parentSuspense);\r\n        }\r\n        function pruneCache(filter) {\r\n            cache.forEach((vnode, key) => {\r\n                const name = getComponentName(vnode.type);\r\n                if (name && (!filter || !filter(name))) {\r\n                    pruneCacheEntry(key);\r\n                }\r\n            });\r\n        }\r\n        function pruneCacheEntry(key) {\r\n            const cached = cache.get(key);\r\n            if (!current || cached.type !== current.type) {\r\n                unmount(cached);\r\n            }\r\n            else if (current) {\r\n                // current active instance should no longer be kept-alive.\r\n                // we can't unmount it now but it might be later, so reset its flag now.\r\n                resetShapeFlag(current);\r\n            }\r\n            cache.delete(key);\r\n            keys.delete(key);\r\n        }\r\n        // prune cache on include/exclude prop change\r\n        watch(() => [props.include, props.exclude], ([include, exclude]) => {\r\n            include && pruneCache(name => matches(include, name));\r\n            exclude && pruneCache(name => !matches(exclude, name));\r\n        }, \r\n        // prune post-render after `current` has been updated\r\n        { flush: 'post', deep: true });\r\n        // cache sub tree after render\r\n        let pendingCacheKey = null;\r\n        const cacheSubtree = () => {\r\n            // fix #1621, the pendingCacheKey could be 0\r\n            if (pendingCacheKey != null) {\r\n                cache.set(pendingCacheKey, getInnerChild(instance.subTree));\r\n            }\r\n        };\r\n        onMounted(cacheSubtree);\r\n        onUpdated(cacheSubtree);\r\n        onBeforeUnmount(() => {\r\n            cache.forEach(cached => {\r\n                const { subTree, suspense } = instance;\r\n                const vnode = getInnerChild(subTree);\r\n                if (cached.type === vnode.type) {\r\n                    // current instance will be unmounted as part of keep-alive's unmount\r\n                    resetShapeFlag(vnode);\r\n                    // but invoke its deactivated hook here\r\n                    const da = vnode.component.da;\r\n                    da && queuePostRenderEffect(da, suspense);\r\n                    return;\r\n                }\r\n                unmount(cached);\r\n            });\r\n        });\r\n        return () => {\r\n            pendingCacheKey = null;\r\n            if (!slots.default) {\r\n                return null;\r\n            }\r\n            const children = slots.default();\r\n            const rawVNode = children[0];\r\n            if (children.length > 1) {\r\n                if (__DEV__) {\r\n                    warn(`KeepAlive should contain exactly one component child.`);\r\n                }\r\n                current = null;\r\n                return children;\r\n            }\r\n            else if (!isVNode(rawVNode) ||\r\n                (!(rawVNode.shapeFlag & 4 /* STATEFUL_COMPONENT */) &&\r\n                    !(rawVNode.shapeFlag & 128 /* SUSPENSE */))) {\r\n                current = null;\r\n                return rawVNode;\r\n            }\r\n            let vnode = getInnerChild(rawVNode);\r\n            const comp = vnode.type;\r\n            // for async components, name check should be based in its loaded\r\n            // inner component if available\r\n            const name = getComponentName(isAsyncWrapper(vnode)\r\n                ? vnode.type.__asyncResolved || {}\r\n                : comp);\r\n            const { include, exclude, max } = props;\r\n            if ((include && (!name || !matches(include, name))) ||\r\n                (exclude && name && matches(exclude, name))) {\r\n                current = vnode;\r\n                return rawVNode;\r\n            }\r\n            const key = vnode.key == null ? comp : vnode.key;\r\n            const cachedVNode = cache.get(key);\r\n            // clone vnode if it's reused because we are going to mutate it\r\n            if (vnode.el) {\r\n                vnode = cloneVNode(vnode);\r\n                if (rawVNode.shapeFlag & 128 /* SUSPENSE */) {\r\n                    rawVNode.ssContent = vnode;\r\n                }\r\n            }\r\n            // #1513 it's possible for the returned vnode to be cloned due to attr\r\n            // fallthrough or scopeId, so the vnode here may not be the final vnode\r\n            // that is mounted. Instead of caching it directly, we store the pending\r\n            // key and cache `instance.subTree` (the normalized vnode) in\r\n            // beforeMount/beforeUpdate hooks.\r\n            pendingCacheKey = key;\r\n            if (cachedVNode) {\r\n                // copy over mounted state\r\n                vnode.el = cachedVNode.el;\r\n                vnode.component = cachedVNode.component;\r\n                if (vnode.transition) {\r\n                    // recursively update transition hooks on subTree\r\n                    setTransitionHooks(vnode, vnode.transition);\r\n                }\r\n                // avoid vnode being mounted as fresh\r\n                vnode.shapeFlag |= 512 /* COMPONENT_KEPT_ALIVE */;\r\n                // make this key the freshest\r\n                keys.delete(key);\r\n                keys.add(key);\r\n            }\r\n            else {\r\n                keys.add(key);\r\n                // prune oldest entry\r\n                if (max && keys.size > parseInt(max, 10)) {\r\n                    pruneCacheEntry(keys.values().next().value);\r\n                }\r\n            }\r\n            // avoid vnode being unmounted\r\n            vnode.shapeFlag |= 256 /* COMPONENT_SHOULD_KEEP_ALIVE */;\r\n            current = vnode;\r\n            return rawVNode;\r\n        };\r\n    }\r\n};\r\nif (__COMPAT__) {\r\n    KeepAliveImpl.__isBuildIn = true;\r\n}\r\n// export the public type for h/tsx inference\r\n// also to avoid inline import() in generated d.ts files\r\nexport const KeepAlive = KeepAliveImpl;\r\nfunction matches(pattern, name) {\r\n    if (isArray(pattern)) {\r\n        return pattern.some((p) => matches(p, name));\r\n    }\r\n    else if (isString(pattern)) {\r\n        return pattern.split(',').indexOf(name) > -1;\r\n    }\r\n    else if (pattern.test) {\r\n        return pattern.test(name);\r\n    }\r\n    /* istanbul ignore next */\r\n    return false;\r\n}\r\nexport function onActivated(hook, target) {\r\n    registerKeepAliveHook(hook, \"a\" /* ACTIVATED */, target);\r\n}\r\nexport function onDeactivated(hook, target) {\r\n    registerKeepAliveHook(hook, \"da\" /* DEACTIVATED */, target);\r\n}\r\nfunction registerKeepAliveHook(hook, type, target = currentInstance) {\r\n    // cache the deactivate branch check wrapper for injected hooks so the same\r\n    // hook can be properly deduped by the scheduler. \"__wdc\" stands for \"with\r\n    // deactivation check\".\r\n    const wrappedHook = hook.__wdc ||\r\n        (hook.__wdc = () => {\r\n            // only fire the hook if the target instance is NOT in a deactivated branch.\r\n            let current = target;\r\n            while (current) {\r\n                if (current.isDeactivated) {\r\n                    return;\r\n                }\r\n                current = current.parent;\r\n            }\r\n            return hook();\r\n        });\r\n    injectHook(type, wrappedHook, target);\r\n    // In addition to registering it on the target instance, we walk up the parent\r\n    // chain and register it on all ancestor instances that are keep-alive roots.\r\n    // This avoids the need to walk the entire component tree when invoking these\r\n    // hooks, and more importantly, avoids the need to track child components in\r\n    // arrays.\r\n    if (target) {\r\n        let current = target.parent;\r\n        while (current && current.parent) {\r\n            if (isKeepAlive(current.parent.vnode)) {\r\n                injectToKeepAliveRoot(wrappedHook, type, target, current);\r\n            }\r\n            current = current.parent;\r\n        }\r\n    }\r\n}\r\nfunction injectToKeepAliveRoot(hook, type, target, keepAliveRoot) {\r\n    // injectHook wraps the original for error handling, so make sure to remove\r\n    // the wrapped version.\r\n    const injected = injectHook(type, hook, keepAliveRoot, true /* prepend */);\r\n    onUnmounted(() => {\r\n        remove(keepAliveRoot[type], injected);\r\n    }, target);\r\n}\r\nfunction resetShapeFlag(vnode) {\r\n    let shapeFlag = vnode.shapeFlag;\r\n    if (shapeFlag & 256 /* COMPONENT_SHOULD_KEEP_ALIVE */) {\r\n        shapeFlag -= 256 /* COMPONENT_SHOULD_KEEP_ALIVE */;\r\n    }\r\n    if (shapeFlag & 512 /* COMPONENT_KEPT_ALIVE */) {\r\n        shapeFlag -= 512 /* COMPONENT_KEPT_ALIVE */;\r\n    }\r\n    vnode.shapeFlag = shapeFlag;\r\n}\r\nfunction getInnerChild(vnode) {\r\n    return vnode.shapeFlag & 128 /* SUSPENSE */ ? vnode.ssContent : vnode;\r\n}\r\n//# sourceMappingURL=KeepAlive.js.map","references":["/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/component.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/vnode.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/warning.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/apiLifecycle.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/shared/src/index.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/apiWatch.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/renderer.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/components/BaseTransition.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/componentPublicInstance.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/devtools.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/apiAsyncComponent.ts"],"map":"{\"version\":3,\"file\":\"KeepAlive.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../packages/runtime-core/src/components/KeepAlive.ts\"],\"names\":[],\"mappings\":\"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\"}"}
