{"code":"import { isFunction } from '@vue/shared';\r\nimport { currentInstance } from './component';\r\nimport { currentRenderingInstance } from './componentRenderContext';\r\nimport { warn } from './warning';\r\nexport function provide(key, value) {\r\n    if (!currentInstance) {\r\n        if (__DEV__) {\r\n            warn(`provide() can only be used inside setup().`);\r\n        }\r\n    }\r\n    else {\r\n        let provides = currentInstance.provides;\r\n        // by default an instance inherits its parent's provides object\r\n        // but when it needs to provide values of its own, it creates its\r\n        // own provides object using parent provides object as prototype.\r\n        // this way in `inject` we can simply look up injections from direct\r\n        // parent and let the prototype chain do the work.\r\n        const parentProvides = currentInstance.parent && currentInstance.parent.provides;\r\n        if (parentProvides === provides) {\r\n            provides = currentInstance.provides = Object.create(parentProvides);\r\n        }\r\n        // TS doesn't allow symbol as index type\r\n        provides[key] = value;\r\n    }\r\n}\r\nexport function inject(key, defaultValue, treatDefaultAsFactory = false) {\r\n    // fallback to `currentRenderingInstance` so that this can be called in\r\n    // a functional component\r\n    const instance = currentInstance || currentRenderingInstance;\r\n    if (instance) {\r\n        // #2400\r\n        // to support `app.use` plugins,\r\n        // fallback to appContext's `provides` if the intance is at root\r\n        const provides = instance.parent == null\r\n            ? instance.vnode.appContext && instance.vnode.appContext.provides\r\n            : instance.parent.provides;\r\n        if (provides && key in provides) {\r\n            // TS doesn't allow symbol as index type\r\n            return provides[key];\r\n        }\r\n        else if (arguments.length > 1) {\r\n            return treatDefaultAsFactory && isFunction(defaultValue)\r\n                ? defaultValue.call(instance.proxy)\r\n                : defaultValue;\r\n        }\r\n        else if (__DEV__) {\r\n            warn(`injection \"${String(key)}\" not found.`);\r\n        }\r\n    }\r\n    else if (__DEV__) {\r\n        warn(`inject() can only be used inside setup() or functional components.`);\r\n    }\r\n}\r\n//# sourceMappingURL=apiInject.js.map","references":["/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/shared/src/index.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/component.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/componentRenderContext.ts","/Users/zhangpian/Documents/projects/github/vue-next-3.2.24/packages/runtime-core/src/warning.ts"],"map":"{\"version\":3,\"file\":\"apiInject.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../packages/runtime-core/src/apiInject.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,aAAa,CAAA;AACxC,OAAO,EAAE,eAAe,EAAE,MAAM,aAAa,CAAA;AAC7C,OAAO,EAAE,wBAAwB,EAAE,MAAM,0BAA0B,CAAA;AACnE,OAAO,EAAE,IAAI,EAAE,MAAM,WAAW,CAAA;AAIhC,MAAM,UAAU,OAAO,CAAI,GAAsC,EAAE,KAAQ;IACzE,IAAI,CAAC,eAAe,EAAE;QACpB,IAAI,OAAO,EAAE;YACX,IAAI,CAAC,4CAA4C,CAAC,CAAA;SACnD;KACF;SAAM;QACL,IAAI,QAAQ,GAAG,eAAe,CAAC,QAAQ,CAAA;QACvC,+DAA+D;QAC/D,iEAAiE;QACjE,iEAAiE;QACjE,oEAAoE;QACpE,kDAAkD;QAClD,MAAM,cAAc,GAClB,eAAe,CAAC,MAAM,IAAI,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAA;QAC3D,IAAI,cAAc,KAAK,QAAQ,EAAE;YAC/B,QAAQ,GAAG,eAAe,CAAC,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,cAAc,CAAC,CAAA;SACpE;QACD,wCAAwC;QACxC,QAAQ,CAAC,GAAa,CAAC,GAAG,KAAK,CAAA;KAChC;AACH,CAAC;AAaD,MAAM,UAAU,MAAM,CACpB,GAA+B,EAC/B,YAAsB,EACtB,qBAAqB,GAAG,KAAK;IAE7B,uEAAuE;IACvE,yBAAyB;IACzB,MAAM,QAAQ,GAAG,eAAe,IAAI,wBAAwB,CAAA;IAC5D,IAAI,QAAQ,EAAE;QACZ,QAAQ;QACR,gCAAgC;QAChC,gEAAgE;QAChE,MAAM,QAAQ,GACZ,QAAQ,CAAC,MAAM,IAAI,IAAI;YACrB,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,UAAU,IAAI,QAAQ,CAAC,KAAK,CAAC,UAAU,CAAC,QAAQ;YACjE,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAA;QAE9B,IAAI,QAAQ,IAAK,GAAuB,IAAI,QAAQ,EAAE;YACpD,wCAAwC;YACxC,OAAO,QAAQ,CAAC,GAAa,CAAC,CAAA;SAC/B;aAAM,IAAI,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;YAC/B,OAAO,qBAAqB,IAAI,UAAU,CAAC,YAAY,CAAC;gBACtD,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC;gBACnC,CAAC,CAAC,YAAY,CAAA;SACjB;aAAM,IAAI,OAAO,EAAE;YAClB,IAAI,CAAC,cAAc,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC,CAAA;SAC9C;KACF;SAAM,IAAI,OAAO,EAAE;QAClB,IAAI,CAAC,oEAAoE,CAAC,CAAA;KAC3E;AACH,CAAC\"}"}
